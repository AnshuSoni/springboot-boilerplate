alter table if exists users drop constraint if exists FKglkhkmh2vyn790ijs6hiqqpi;
alter table if exists product drop constraint if exists FK1mtsbur82frn64de7balymq9s;
alter table if exists product_colors drop constraint if exists FKnsx2o5yps04usk840fr4dpvjy;
alter table if exists product_colors drop constraint if exists FKrxtutgloy8nt7w2k50fnmu3ji;
alter table if exists product_reviews drop constraint if exists FK4m1i84jhctsjdu73v2wrjwe63;
alter table if exists product_reviews drop constraint if exists FKipftsx386s1e9e1lk5onryuh5;
alter table if exists product_sellers drop constraint if exists FK9sfk2d99i3fg75hmobgp8in33;
alter table if exists product_sellers drop constraint if exists FK2eyx6hbsnaux27a6x4dwqp4f0;
alter table if exists product_sizes drop constraint if exists FK4w69qsh5hd062xv3hqkpgpdpu;
alter table if exists review drop constraint if exists FKgce54o0p6uugoc2tev4awewly;
alter table if exists sellers drop constraint if exists FKsso5ye3p3m9yfwp96nmxrga96;
alter table if exists user_roles drop constraint if exists FKh8ciramu9cc9q3qcqiv4ue8a6;
alter table if exists user_roles drop constraint if exists FK6jc1cscwrvbr2paq0en10rdm8;
drop table if exists address cascade;
drop table if exists brand cascade;
drop table if exists category cascade;
drop table if exists color cascade;
drop table if exists users cascade;
drop table if exists product cascade;
drop table if exists product_colors cascade;
drop table if exists product_reviews cascade;
drop table if exists product_sellers cascade;
drop table if exists product_sizes cascade;
drop table if exists review cascade;
drop table if exists roles cascade;
drop table if exists sellers cascade;
drop table if exists user_roles cascade;
drop sequence if exists address_seq;
drop sequence if exists category_seq;
drop sequence if exists color_seq;
drop sequence if exists users_seq;
drop sequence if exists product_seq;
drop sequence if exists review_seq;
drop sequence if exists roles_seq;
drop sequence if exists sellers_seq;
create sequence address_seq start with 1 increment by 50;
create sequence category_seq start with 1 increment by 50;
create sequence color_seq start with 1 increment by 50;
create sequence users_seq start with 1 increment by 50;
create sequence product_seq start with 1 increment by 50;
create sequence review_seq start with 1 increment by 50;
create sequence roles_seq start with 1 increment by 50;
create sequence sellers_seq start with 1 increment by 50;
create table address (id bigint not null, landmark varchar(255), name varchar(255), phone_number varchar(255), pin_code varchar(255), second_street varchar(255), street_name varchar(255), primary key (id));
create table brand (id bigint generated by default as identity, brand_name varchar(255), primary key (id));
create table category (id bigint not null, parent_cat_id bigint, name varchar(255), primary key (id));
create table color (id bigint not null, color_code varchar(255), name varchar(255), primary key (id));
create table users (address_id bigint unique, created_dt timestamp(6), id bigint not null, last_updated_dt timestamp(6), created_by varchar(255), email varchar(255), last_modified_by varchar(255), name varchar(255), password varchar(255), primary key (id));
create table product (expiry_date date, manufacturing_date date, price float(53), category_id bigint unique, created_dt timestamp(6), id bigint not null, last_updated_dt timestamp(6), batch_num varchar(255), created_by varchar(255), description varchar(255), last_modified_by varchar(255), name varchar(255), sku varchar(255), brand bytea, primary key (id));
create table product_colors (colors_id bigint not null unique, product_id bigint not null, primary key (colors_id, product_id));
create table product_reviews (product_id bigint not null, reviews_id bigint not null unique, primary key (product_id, reviews_id));
create table product_sellers (product_id bigint not null, sellers_id bigint not null unique, primary key (product_id, sellers_id));
create table product_sizes (product_id bigint not null, sizes varchar(255) check (sizes in ('XS','S','L','M','XL','XXL','XXXL')));
create table review (users_id bigint unique, id bigint not null, review_text varchar(255) not null, primary key (id));
create table roles (id bigint not null, role varchar(255) check (role in ('ROLE_CUSTOMER','ROLE_USER','ROLE_MODERATOR','ROLE_ADMIN')), primary key (id));
create table sellers (address_id bigint unique, created_dt timestamp(6), id bigint not null, last_updated_dt timestamp(6), created_by varchar(255), gstn varchar(255), last_modified_by varchar(255), seller_name varchar(255), phone_numbers varchar(255) array, primary key (id));
create table user_roles (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id));
alter table if exists users add constraint FKglkhkmh2vyn790ijs6hiqqpi foreign key (address_id) references address;
alter table if exists product add constraint FK1mtsbur82frn64de7balymq9s foreign key (category_id) references category;
alter table if exists product_colors add constraint FKnsx2o5yps04usk840fr4dpvjy foreign key (colors_id) references color;
alter table if exists product_colors add constraint FKrxtutgloy8nt7w2k50fnmu3ji foreign key (product_id) references product;
alter table if exists product_reviews add constraint FK4m1i84jhctsjdu73v2wrjwe63 foreign key (reviews_id) references review;
alter table if exists product_reviews add constraint FKipftsx386s1e9e1lk5onryuh5 foreign key (product_id) references product;
alter table if exists product_sellers add constraint FK9sfk2d99i3fg75hmobgp8in33 foreign key (sellers_id) references sellers;
alter table if exists product_sellers add constraint FK2eyx6hbsnaux27a6x4dwqp4f0 foreign key (product_id) references product;
alter table if exists product_sizes add constraint FK4w69qsh5hd062xv3hqkpgpdpu foreign key (product_id) references product;
alter table if exists review add constraint FKgce54o0p6uugoc2tev4awewly foreign key (users_id) references users;
alter table if exists sellers add constraint FKsso5ye3p3m9yfwp96nmxrga96 foreign key (address_id) references address;
alter table if exists user_roles add constraint FKh8ciramu9cc9q3qcqiv4ue8a6 foreign key (role_id) references roles;
alter table if exists user_roles add constraint FK6jc1cscwrvbr2paq0en10rdm8 foreign key (user_id) references users;
